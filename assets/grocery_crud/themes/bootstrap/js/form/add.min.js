function clearForm(){$("#crudForm").find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"textarea":$(this).val("");break;case"checkbox":case"radio":this.checked=!1}}),$(".open-file,.gc-file-upload,.hidden-upload-input").each(function(){$(this).val("")}),$(".upload-success-url").hide(),$(".fileinput-button").fadeIn("normal"),$(".remove-all").each(function(){$(this).trigger("click")}),$(".chosen-multiple-select, .chosen-select, .ajax-chosen-select").each(function(){$(this).trigger("liszt:updated")})}jQuery(function(a){"use strict";a(".ptogtitle").click(function(){a(this).hasClass("vsble")?(a(this).removeClass("vsble"),a("#main-table-box #crudForm").slideDown("slow")):(a(this).addClass("vsble"),a("#main-table-box #crudForm").slideUp("slow"))});var b=!1;a("#save-and-go-back-button").click(function(){b=!0,a("#crudForm").trigger("submit")}),a("#crudForm").submit(function(){var c=a(this);return a(this).ajaxSubmit({url:validation_url,dataType:"json",cache:"false",beforeSend:function(){a("#FormLoading").show()},success:function(d){a("#FormLoading").hide(),d.success?a("#crudForm").ajaxSubmit({dataType:"text",cache:"false",beforeSend:function(){a("#FormLoading").show()},success:function(e){if(a("#FormLoading").fadeOut("slow"),d=a.parseJSON(e),d.success){var f=c.closest(".flexigrid").attr("data-unique-hash");if(a(".flexigrid[data-unique-hash="+f+"]").find(".ajax_refresh_and_loading").trigger("click"),b)return 0===a("#save-and-go-back-button").closest(".ui-dialog").length?window.location=d.success_list_url:(a(".ui-dialog-content").dialog("close"),success_message(d.success_message)),!0;a(".field_error").each(function(){a(this).removeClass("field_error")}),clearForm(),form_success_message(d.success_message)}else alert(message_insert_error)},error:function(){alert(message_insert_error),a("#FormLoading").hide()}}):(a(".has-error").removeClass("has-error"),form_error_message(d.error_message),a.each(d.error_fields,function(b){a("input[name="+b+"]").closest(".form-group").addClass("has-error")}))},error:function(){error_message(message_insert_error),a("#FormLoading").hide()}}),!1}),0===a("#cancel-button").closest(".ui-dialog").length&&a("#cancel-button").click(function(){return window.location=list_url,!1})});